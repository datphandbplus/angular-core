import * as tslib_1 from "tslib";
import { Pipe } from '@angular/core';
var OrderByPipe = /** @class */ (function () {
    function OrderByPipe() {
    }
    OrderByPipe_1 = OrderByPipe;
    /**
    * Order by comparator
    * @static
    * @param {any} a
    * @param {any} b
    * @return {number}
    */
    OrderByPipe._orderByComparator = function (a, b) {
        if (!a)
            return -1;
        if (!b)
            return 1;
        if ((isNaN(parseFloat(a)) || !isFinite(a))
            || (isNaN(parseFloat(b)) || !isFinite(b))) {
            // Isn't a number so lowercase the string to properly compare
            if (a.toLowerCase() < b.toLowerCase())
                return -1;
            if (a.toLowerCase() > b.toLowerCase())
                return 1;
        }
        else {
            // Parse strings as numbers to compare properly
            if (parseFloat(a) < parseFloat(b))
                return -1;
            if (parseFloat(a) > parseFloat(b))
                return 1;
        }
        return 0; // equal each other
    };
    /**
    * Get own nested property
    * @static
    * @param {any} obj
    * @param {string} propertyPath
    * @return {any}
    */
    OrderByPipe.getOwnNestedProperty = function (obj, propertyPath) {
        if (!propertyPath)
            return false;
        var properties = propertyPath.split('.');
        for (var i = 0; i < properties.length; i++) {
            var prop = properties[i];
            if (!obj || !obj.hasOwnProperty(prop)) {
                return null;
            }
            obj = obj[prop];
        }
        return obj;
    };
    /**
    * Transform
    * @param {any} input
    * @return {any}
    */
    OrderByPipe.prototype.transform = function (input, _a) {
        var _b = tslib_1.__read(_a, 1), _c = _b[0], config = _c === void 0 ? '+' : _c;
        if (!Array.isArray(input))
            return input;
        if (!Array.isArray(config)
            || (Array.isArray(config) && config.length === 1)) {
            var propertyToCheck = !Array.isArray(config) ? config : config[0];
            var desc_1 = propertyToCheck.substr(0, 1) === '-';
            if (!propertyToCheck
                || propertyToCheck === '-' || propertyToCheck === '+') {
                return !desc_1 ? input.sort() : input.sort().reverse();
            }
            var property_1 = propertyToCheck.substr(0, 1) === '+'
                || propertyToCheck.substr(0, 1) === '-'
                ? propertyToCheck.substr(1)
                : propertyToCheck;
            return input.sort(function (a, b) {
                return !desc_1
                    ? OrderByPipe_1._orderByComparator(OrderByPipe_1.getOwnNestedProperty(a, property_1), OrderByPipe_1.getOwnNestedProperty(b, property_1))
                    : -OrderByPipe_1._orderByComparator(OrderByPipe_1.getOwnNestedProperty(a, property_1), OrderByPipe_1.getOwnNestedProperty(b, property_1));
            });
        }
        return input.sort(function (a, b) {
            for (var i = 0; i < config.length; i++) {
                var desc = config[i].substr(0, 1) === '-';
                var property = config[i].substr(0, 1) === '+'
                    || config[i].substr(0, 1) === '-'
                    ? config[i].substr(1)
                    : config[i];
                var comparison = !desc
                    ? OrderByPipe_1._orderByComparator(OrderByPipe_1.getOwnNestedProperty(a, property), OrderByPipe_1.getOwnNestedProperty(b, property))
                    : -OrderByPipe_1._orderByComparator(OrderByPipe_1.getOwnNestedProperty(a, property), OrderByPipe_1.getOwnNestedProperty(b, property));
                if (comparison !== 0)
                    return comparison;
            }
            return 0;
        });
    };
    var OrderByPipe_1;
    OrderByPipe = OrderByPipe_1 = tslib_1.__decorate([
        Pipe({
            name: 'orderBy',
            pure: false,
        })
    ], OrderByPipe);
    return OrderByPipe;
}());
export { OrderByPipe };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib3JkZXItYnkucGlwZS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL2FuZ3VsYXItY29yZS8iLCJzb3VyY2VzIjpbImxpYi9waXBlcy9vcmRlci1ieS5waXBlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQUUsSUFBSSxFQUFpQixNQUFNLGVBQWUsQ0FBQztBQU1wRDtJQUFBO0lBK0dBLENBQUM7b0JBL0dZLFdBQVc7SUFFdkI7Ozs7OztNQU1FO0lBQ1ksOEJBQWtCLEdBQWhDLFVBQWtDLENBQU0sRUFBRSxDQUFNO1FBQy9DLElBQUssQ0FBQyxDQUFDO1lBQUcsT0FBTyxDQUFDLENBQUMsQ0FBQztRQUNwQixJQUFLLENBQUMsQ0FBQztZQUFHLE9BQU8sQ0FBQyxDQUFDO1FBRW5CLElBQUssQ0FBRSxLQUFLLENBQUUsVUFBVSxDQUFFLENBQUMsQ0FBRSxDQUFFLElBQUksQ0FBQyxRQUFRLENBQUUsQ0FBQyxDQUFFLENBQUU7ZUFDL0MsQ0FBRSxLQUFLLENBQUUsVUFBVSxDQUFFLENBQUMsQ0FBRSxDQUFFLElBQUksQ0FBQyxRQUFRLENBQUUsQ0FBQyxDQUFFLENBQUUsRUFBRztZQUNwRCw2REFBNkQ7WUFDN0QsSUFBSyxDQUFDLENBQUMsV0FBVyxFQUFFLEdBQUcsQ0FBQyxDQUFDLFdBQVcsRUFBRTtnQkFBRyxPQUFPLENBQUMsQ0FBQyxDQUFDO1lBQ25ELElBQUssQ0FBQyxDQUFDLFdBQVcsRUFBRSxHQUFHLENBQUMsQ0FBQyxXQUFXLEVBQUU7Z0JBQUcsT0FBTyxDQUFDLENBQUM7U0FDbEQ7YUFBTTtZQUNOLCtDQUErQztZQUMvQyxJQUFLLFVBQVUsQ0FBRSxDQUFDLENBQUUsR0FBRyxVQUFVLENBQUUsQ0FBQyxDQUFFO2dCQUFHLE9BQU8sQ0FBQyxDQUFDLENBQUM7WUFDbkQsSUFBSyxVQUFVLENBQUUsQ0FBQyxDQUFFLEdBQUcsVUFBVSxDQUFFLENBQUMsQ0FBRTtnQkFBRyxPQUFPLENBQUMsQ0FBQztTQUNsRDtRQUNELE9BQU8sQ0FB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V0FBVyxDQStHdkI7SUFBRCxrQkFBQztDQUFBLEFBL0dELElBK0dDO1NBL0dZLFdBQVciLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQaXBlLCBQaXBlVHJhbnNmb3JtIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbkBQaXBlKHtcblx0bmFtZTogJ29yZGVyQnknLFxuXHRwdXJlOiBmYWxzZSxcbn0pXG5leHBvcnQgY2xhc3MgT3JkZXJCeVBpcGUgaW1wbGVtZW50cyBQaXBlVHJhbnNmb3JtIHtcblxuXHQvKipcblx0KiBPcmRlciBieSBjb21wYXJhdG9yXG5cdCogQHN0YXRpY1xuXHQqIEBwYXJhbSB7YW55fSBhXG5cdCogQHBhcmFtIHthbnl9IGJcblx0KiBAcmV0dXJuIHtudW1iZXJ9XG5cdCovXG5cdHB1YmxpYyBzdGF0aWMgX29yZGVyQnlDb21wYXJhdG9yKCBhOiBhbnksIGI6IGFueSApOiBudW1iZXIge1xuXHRcdGlmICggIWEgKSByZXR1cm4gLTE7XG5cdFx0aWYgKCAhYiApIHJldHVybiAxO1xuXG5cdFx0aWYgKCAoIGlzTmFOKCBwYXJzZUZsb2F0KCBhICkgKSB8fCAhaXNGaW5pdGUoIGEgKSApXG5cdFx0XHR8fCAoIGlzTmFOKCBwYXJzZUZsb2F0KCBiICkgKSB8fCAhaXNGaW5pdGUoIGIgKSApICkge1xuXHRcdFx0Ly8gSXNuJ3QgYSBudW1iZXIgc28gbG93ZXJjYXNlIHRoZSBzdHJpbmcgdG8gcHJvcGVybHkgY29tcGFyZVxuXHRcdFx0aWYgKCBhLnRvTG93ZXJDYXNlKCkgPCBiLnRvTG93ZXJDYXNlKCkgKSByZXR1cm4gLTE7XG5cdFx0XHRpZiAoIGEudG9Mb3dlckNhc2UoKSA+IGIudG9Mb3dlckNhc2UoKSApIHJldHVybiAxO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBQYXJzZSBzdHJpbmdzIGFzIG51bWJlcnMgdG8gY29tcGFyZSBwcm9wZXJseVxuXHRcdFx0aWYgKCBwYXJzZUZsb2F0KCBhICkgPCBwYXJzZUZsb2F0KCBiICkgKSByZXR1cm4gLTE7XG5cdFx0XHRpZiAoIHBhcnNlRmxvYXQoIGEgKSA+IHBhcnNlRmxvYXQoIGIgKSApIHJldHVybiAxO1xuXHRcdH1cblx0XHRyZXR1cm4gMDsgLy8gZXF1YWwgZWFjaCBvdGhlclxuXHR9XG5cblx0LyoqXG5cdCogR2V0IG93biBuZXN0ZWQgcHJvcGVydHlcblx0KiBAc3RhdGljXG5cdCogQHBhcmFtIHthbnl9IG9ialxuXHQqIEBwYXJhbSB7c3RyaW5nfSBwcm9wZXJ0eVBhdGhcblx0KiBAcmV0dXJuIHthbnl9XG5cdCovXG5cdHB1YmxpYyBzdGF0aWMgZ2V0T3duTmVzdGVkUHJvcGVydHkoIG9iajogYW55LCBwcm9wZXJ0eVBhdGg6IHN0cmluZyApOiBhbnkge1xuXHRcdGlmICggIXByb3BlcnR5UGF0aCApIHJldHVybiBmYWxzZTtcblxuXHRcdGNvbnN0IHByb3BlcnRpZXM6IEFycmF5PHN0cmluZz4gPSBwcm9wZXJ0eVBhdGguc3BsaXQoICcuJyApO1xuXG5cdFx0Zm9yICggbGV0IGk6IG51bWJlciA9IDA7IGkgPCBwcm9wZXJ0aWVzLmxlbmd0aDsgaSsrICkge1xuXHRcdFx0Y29uc3QgcHJvcDogc3RyaW5nID0gcHJvcGVydGllc1sgaSBdO1xuXG5cdFx0XHRpZiAoICFvYmogfHwgIW9iai5oYXNPd25Qcm9wZXJ0eSggcHJvcCApICkge1xuXHRcdFx0XHRyZXR1cm4gbnVsbDtcblx0XHRcdH1cblxuXHRcdFx0b2JqID0gb2JqWyBwcm9wIF07XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG9iajtcblx0fVxuXG5cdC8qKlxuXHQqIFRyYW5zZm9ybVxuXHQqIEBwYXJhbSB7YW55fSBpbnB1dFxuXHQqIEByZXR1cm4ge2FueX1cblx0Ki9cblx0cHVibGljIHRyYW5zZm9ybSggaW5wdXQ6IGFueSwgWyBjb25maWcgPSAnKycgXTogYW55ICk6IGFueSB7XG5cdFx0aWYgKCAhQXJyYXkuaXNBcnJheSggaW5wdXQgKSApIHJldHVybiBpbnB1dDtcblxuXHRcdGlmICggIUFycmF5LmlzQXJyYXkoIGNvbmZpZyApXG5cdFx0XHR8fCAoIEFycmF5LmlzQXJyYXkoIGNvbmZpZyApICYmIGNvbmZpZy5sZW5ndGggPT09IDEgKSApIHtcblx0XHRcdGNvbnN0IHByb3BlcnR5VG9DaGVjazogc3RyaW5nID0gIUFycmF5LmlzQXJyYXkoIGNvbmZpZyApID8gY29uZmlnIDogY29uZmlnWyAwIF07XG5cdFx0XHRjb25zdCBkZXNjOiBib29sZWFuID0gcHJvcGVydHlUb0NoZWNrLnN1YnN0ciggMCwgMSApID09PSAnLSc7XG5cblx0XHRcdGlmICggIXByb3BlcnR5VG9DaGVja1xuXHRcdFx0XHR8fCBwcm9wZXJ0eVRvQ2hlY2sgPT09ICctJyB8fCBwcm9wZXJ0eVRvQ2hlY2sgPT09ICcrJyApIHtcblx0XHRcdFx0cmV0dXJuICFkZXNjID8gaW5wdXQuc29ydCgpIDogaW5wdXQuc29ydCgpLnJldmVyc2UoKTtcblx0XHRcdH1cblxuXHRcdFx0Y29uc3QgcHJvcGVydHk6IHN0cmluZyA9IHByb3BlcnR5VG9DaGVjay5zdWJzdHIoIDAsIDEgKSA9PT0gJysnXG5cdFx0XHRcdHx8IHByb3BlcnR5VG9DaGVjay5zdWJzdHIoIDAsIDEgKSA9PT0gJy0nXG5cdFx0XHRcdD8gcHJvcGVydHlUb0NoZWNrLnN1YnN0ciggMSApXG5cdFx0XHRcdDogcHJvcGVydHlUb0NoZWNrO1xuXG5cdFx0XHRyZXR1cm4gaW5wdXQuc29ydCggKCBhOiBhbnksIGI6IGFueSApID0+IHtcblx0XHRcdFx0cmV0dXJuICFkZXNjXG5cdFx0XHRcdFx0PyBPcmRlckJ5UGlwZS5fb3JkZXJCeUNvbXBhcmF0b3IoXG5cdFx0XHRcdFx0XHRPcmRlckJ5UGlwZS5nZXRPd25OZXN0ZWRQcm9wZXJ0eSggYSwgcHJvcGVydHkgKSxcblx0XHRcdFx0XHRcdE9yZGVyQnlQaXBlLmdldE93bk5lc3RlZFByb3BlcnR5KCBiLCBwcm9wZXJ0eSApXG5cdFx0XHRcdFx0KVxuXHRcdFx0XHRcdDogLU9yZGVyQnlQaXBlLl9vcmRlckJ5Q29tcGFyYXRvcihcblx0XHRcdFx0XHRcdE9yZGVyQnlQaXBlLmdldE93bk5lc3RlZFByb3BlcnR5KCBhLCBwcm9wZXJ0eSApLFxuXHRcdFx0XHRcdFx0T3JkZXJCeVBpcGUuZ2V0T3duTmVzdGVkUHJvcGVydHkoIGIsIHByb3BlcnR5IClcblx0XHRcdFx0XHQpO1xuXHRcdFx0fSApO1xuXHRcdH1cblxuXHRcdHJldHVybiBpbnB1dC5zb3J0KCAoIGE6IGFueSwgYjogYW55ICkgPT4ge1xuXHRcdFx0Zm9yICggbGV0IGk6IG51bWJlciA9IDA7IGkgPCBjb25maWcubGVuZ3RoOyBpKysgKSB7XG5cdFx0XHRcdGNvbnN0IGRlc2M6IGJvb2xlYW4gPSBjb25maWdbIGkgXS5zdWJzdHIoIDAsIDEgKSA9PT0gJy0nO1xuXHRcdFx0XHRjb25zdCBwcm9wZXJ0eTogc3RyaW5nID0gY29uZmlnWyBpIF0uc3Vic3RyKCAwLCAxICkgPT09ICcrJ1xuXHRcdFx0XHRcdHx8IGNvbmZpZ1sgaSBdLnN1YnN0ciggMCwgMSApID09PSAnLSdcblx0XHRcdFx0XHQ/IGNvbmZpZ1sgaSBdLnN1YnN0ciggMSApXG5cdFx0XHRcdFx0OiBjb25maWdbIGkgXTtcblx0XHRcdFx0Y29uc3QgY29tcGFyaXNvbjogbnVtYmVyID0gIWRlc2Ncblx0XHRcdFx0XHQ/IE9yZGVyQnlQaXBlLl9vcmRlckJ5Q29tcGFyYXRvcihcblx0XHRcdFx0XHRcdE9yZGVyQnlQaXBlLmdldE93bk5lc3RlZFByb3BlcnR5KCBhLCBwcm9wZXJ0eSApLFxuXHRcdFx0XHRcdFx0T3JkZXJCeVBpcGUuZ2V0T3duTmVzdGVkUHJvcGVydHkoIGIsIHByb3BlcnR5IClcblx0XHRcdFx0XHQpXG5cdFx0XHRcdFx0OiAtT3JkZXJCeVBpcGUuX29yZGVyQnlDb21wYXJhdG9yKFxuXHRcdFx0XHRcdFx0T3JkZXJCeVBpcGUuZ2V0T3duTmVzdGVkUHJvcGVydHkoIGEsIHByb3BlcnR5ICksXG5cdFx0XHRcdFx0XHRPcmRlckJ5UGlwZS5nZXRPd25OZXN0ZWRQcm9wZXJ0eSggYiwgcHJvcGVydHkgKVxuXHRcdFx0XHRcdCk7XG5cblx0XHRcdFx0aWYgKCBjb21wYXJpc29uICE9PSAwICkgcmV0dXJuIGNvbXBhcmlzb247XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiAwO1xuXHRcdH0gKTtcblx0fVxuXG59XG4iXX0=