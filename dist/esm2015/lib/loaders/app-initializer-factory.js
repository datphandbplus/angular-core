import { LOCATION_INITIALIZED } from '@angular/common';
import moment from 'moment-timezone';
import { DEFAULT_TIMEZONE } from '../injection-token';
export function appInitializerFactory(localeService, injector) {
    return () => new Promise((resolve) => {
        const locationInitialized = injector.get(LOCATION_INITIALIZED, Promise.resolve(null));
        const defaultTimezone = injector.get(DEFAULT_TIMEZONE);
        locationInitialized.then(() => {
            // Set moment timezone
            moment.tz.setDefault(defaultTimezone);
            // Init system locale
            localeService.initLocale();
            resolve(true);
        });
    });
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwLWluaXRpYWxpemVyLWZhY3RvcnkuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9hbmd1bGFyLWNvcmUvIiwic291cmNlcyI6WyJsaWIvbG9hZGVycy9hcHAtaW5pdGlhbGl6ZXItZmFjdG9yeS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxPQUFPLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUN2RCxPQUFPLE1BQU0sTUFBTSxpQkFBaUIsQ0FBQztBQUVyQyxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQztBQUd0RCxNQUFNLFVBQVUscUJBQXFCLENBQUUsYUFBNEIsRUFBRSxRQUFrQjtJQUN0RixPQUFPLEdBQUcsRUFBRSxDQUFDLElBQUksT0FBTyxDQUFPLENBQUUsT0FBWSxFQUFHLEVBQUU7UUFDakQsTUFBTSxtQkFBbUIsR0FBUSxRQUFRLENBQUMsR0FBRyxDQUFFLG9CQUFvQixFQUFFLE9BQU8sQ0FBQyxPQUFPLENBQUUsSUFBSSxDQUFFLENBQUUsQ0FBQztRQUMvRixNQUFNLGVBQWUsR0FBVyxRQUFRLENBQUMsR0FBRyxDQUFFLGdCQUFnQixDQUFFLENBQUM7UUFFakUsbUJBQW1CLENBQUMsSUFBSSxDQUFFLEdBQUcsRUFBRTtZQUM5QixzQkFBc0I7WUFDdEIsTUFBTSxDQUFDLEVBQUUsQ0FBQyxVQUFVLENBQUUsZUFBZSxDQUFFLENBQUM7WUFFeEMscUJBQXFCO1lBQ3JCLGFBQWEsQ0FBQyxVQUFVLEVBQUUsQ0FBQztZQUUzQixPQUFPLENBQUUsSUFBSSxDQUFFLENBQUM7UUFDakIsQ0FBQyxDQUFFLENBQUM7SUFDTCxDQUFDLENBQUUsQ0FBQztBQUNMLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3RvciB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgTE9DQVRJT05fSU5JVElBTElaRUQgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQtdGltZXpvbmUnO1xuXG5pbXBvcnQgeyBERUZBVUxUX1RJTUVaT05FIH0gZnJvbSAnLi4vaW5qZWN0aW9uLXRva2VuJztcbmltcG9ydCB7IExvY2FsZVNlcnZpY2UgfSBmcm9tICcuLi9zZXJ2aWNlcy9sb2NhbGUuc2VydmljZSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBhcHBJbml0aWFsaXplckZhY3RvcnkoIGxvY2FsZVNlcnZpY2U6IExvY2FsZVNlcnZpY2UsIGluamVjdG9yOiBJbmplY3RvciApIHtcblx0cmV0dXJuICgpID0+IG5ldyBQcm9taXNlPGFueT4oICggcmVzb2x2ZTogYW55ICkgPT4ge1xuXHRcdGNvbnN0IGxvY2F0aW9uSW5pdGlhbGl6ZWQ6IGFueSA9IGluamVjdG9yLmdldCggTE9DQVRJT05fSU5JVElBTElaRUQsIFByb21pc2UucmVzb2x2ZSggbnVsbCApICk7XG5cdFx0Y29uc3QgZGVmYXVsdFRpbWV6b25lOiBzdHJpbmcgPSBpbmplY3Rvci5nZXQoIERFRkFVTFRfVElNRVpPTkUgKTtcblxuXHRcdGxvY2F0aW9uSW5pdGlhbGl6ZWQudGhlbiggKCkgPT4ge1xuXHRcdFx0Ly8gU2V0IG1vbWVudCB0aW1lem9uZVxuXHRcdFx0bW9tZW50LnR6LnNldERlZmF1bHQoIGRlZmF1bHRUaW1lem9uZSApO1xuXG5cdFx0XHQvLyBJbml0IHN5c3RlbSBsb2NhbGVcblx0XHRcdGxvY2FsZVNlcnZpY2UuaW5pdExvY2FsZSgpO1xuXG5cdFx0XHRyZXNvbHZlKCB0cnVlICk7XG5cdFx0fSApO1xuXHR9ICk7XG59XG4iXX0=